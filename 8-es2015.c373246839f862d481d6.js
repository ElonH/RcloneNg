(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"8Zbc":function(t,e,n){"use strict";n.r(e),n.d(e,"ManagerModule",(function(){return Ht}));var i=n("ofXK"),c=n("3Pt+"),o=n("aceb"),r=n("LPYB"),s=n("FTbq"),a=n("fXoL"),l=n("Iab2");n("tk/3");let u=(()=>{let t=class{get isFileSaverSupported(){try{return!!new Blob}catch(t){return!1}}genType(t){if(!t||-1===t.lastIndexOf("."))return"text/plain";const e=t.substr(t.lastIndexOf(".")+1);switch(e){case"txt":return"text/plain";case"xml":case"html":return`text/${e}`;case"json":return"octet/stream";default:return`application/${e}`}}save(t,e,n,i){if(!t)throw new Error("Data argument should be a blob instance");const c=new Blob([t],{type:n||t.type||this.genType(e)});Object(l.saveAs)(c,decodeURI(e||"download"),i)}saveText(t,e,n){const i=new Blob([t]);this.save(i,e,null,n)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(a.Ub)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),d=(()=>{let t=class{};return t.\u0275mod=a.Wb({type:t}),t.\u0275inj=a.Vb({factory:function(e){return new(e||t)}}),t})();var h=n("V2v1"),p=n("G3Ii"),b=n("tyNb"),f=n("U5lE"),m=n("x0Mr"),g=n("XNiG"),v=n("/uUt"),w=n("lJxs"),y=n("zp1y"),O=n("GJmQ"),_=n("/ciQ"),M=n("JYL7"),k=n("mrSG"),x=n("7o/Q");class S{constructor(t){this.value=t}call(t,e){return e.subscribe(new I(t,this.value))}}class I extends x.a{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}var C=n("mH7l"),j=n.n(C),P=n("SxV6");let D=(()=>{class t{static add(e,n){if(!e||""===e)throw new Error("id shouln't be empty!");if(t.map.hasOwnProperty(e))throw new Error(`id: '${e}' already exist`);t.map[e]=n}static find(e){return t.map[e]}}return t.map={},t})();var $=n("L7Zs");let T=(()=>{class t extends class{constructor(){this.groupsQueue=[],this.packsQueue=[],this.tasksQueue=new j.a({concurrency:1}),this.tasksQueue.on("idle",()=>this.idleHandler())}idleHandler(){if(0===this.tasksQueue.size){if(0===this.packsQueue.length&&this.groupsQueue.length>0){const t=this.groupsQueue.shift();this.BundleHandle(...t)}if(this.packsQueue.length>0){const t=this.packsQueue.shift();this.BundleHandle(...t)}}}AddTask(t){return Object(k.a)(this,void 0,void 0,(function*(){const e=new g.a,n="string"==typeof t.handler?D.find(t.handler):t.handler;if(!n)throw new Error(`handler id '${t.handler}' not registered in TaskHandlerManager`);return this.tasksQueue.add(()=>Object(k.a)(this,void 0,void 0,(function*(){return n(t.params,e),e.pipe(Object(P.a)()).toPromise()})))}))}BundleHandle(t,e){return Object(k.a)(this,void 0,void 0,(function*(){if("function"!=typeof t){const n=t.map(t=>Array.isArray(t)?this.AddPack(t):this.AddTask(t));Promise.all(n).then(t=>{e.next([t.map(t=>t[0]),t.map(t=>t[1]).reduce((t,e)=>[].concat(...t,...e))])})}else{const n=t();let i=n.next();const c=[];for(;!i.done;){const t=yield Array.isArray(i)?this.AddPack(i.value):this.AddTask(i.value);c.push(t),i=n.next(t)}e.next([c.map(t=>t[0]),c.map(t=>t[1]).reduce((t,e)=>[].concat(...t,...e))])}}))}AddPack(t){return Object(k.a)(this,void 0,void 0,(function*(){const e=new g.a;return this.packsQueue.push([t,e]),this.idleHandler(),e.pipe(Object(P.a)()).toPromise()}))}AddGroup(t){return Object(k.a)(this,void 0,void 0,(function*(){const e=new g.a;return this.groupsQueue.push([t,e]),this.idleHandler(),e.pipe(Object(P.a)()).toPromise()}))}}{constructor(t){super(),D.add("mkdir",(e,n)=>{const i=new class extends M.x{constructor(){super(...arguments),this.prerequest$=t.listCmd$.verify(this.cmd).pipe(Object(w.a)(t=>[Object.assign(Object.assign({},t[0]),e[0]),[].concat(e[1],t[1])]))}};i.deploy(),i.getOutput().subscribe(t=>n.next(t))}),D.add("copyfile",(e,n)=>{const i=new class extends M.t{constructor(){super(...arguments),this.prerequest$=t.listCmd$.verify(this.cmd).pipe(Object(w.a)(t=>[Object.assign(Object.assign({},t[0]),e[0]),[].concat(e[1],t[1])]))}};i.deploy(),i.getOutput().subscribe(t=>n.next(t))}),D.add("movefile",(e,n)=>{const i=new class extends M.y{constructor(){super(...arguments),this.prerequest$=t.listCmd$.verify(this.cmd).pipe(Object(w.a)(t=>[Object.assign(Object.assign({},t[0]),e[0]),[].concat(e[1],t[1])]))}};i.deploy(),i.getOutput().subscribe(t=>n.next(t))}),D.add("delfile",(e,n)=>{const i=new class extends M.u{constructor(){super(...arguments),this.prerequest$=t.listCmd$.verify(this.cmd).pipe(Object(w.a)(t=>[Object.assign(Object.assign({},t[0]),e[0]),[].concat(e[1],t[1])]))}};i.deploy(),i.getOutput().subscribe(t=>n.next(t))}),D.add("synccopy",(e,n)=>{const i=new class extends M.C{constructor(){super(...arguments),this.prerequest$=t.listCmd$.verify(this.cmd).pipe(Object(w.a)(t=>[Object.assign(Object.assign({},t[0]),e[0]),[].concat(e[1],t[1])]))}};i.deploy(),i.getOutput().subscribe(t=>n.next(t))}),D.add("syncmove",(e,n)=>{const i=new class extends M.D{constructor(){super(...arguments),this.prerequest$=t.listCmd$.verify(this.cmd).pipe(Object(w.a)(t=>[Object.assign(Object.assign({},t[0]),e[0]),[].concat(e[1],t[1])]))}};i.deploy(),i.getOutput().subscribe(t=>n.next(t))}),D.add("purge",(e,n)=>{const i=new class extends M.z{constructor(){super(...arguments),this.prerequest$=t.listCmd$.verify(this.cmd).pipe(Object(w.a)(t=>[Object.assign(Object.assign({},t[0]),e[0]),[].concat(e[1],t[1])]))}};i.deploy(),i.getOutput().subscribe(t=>n.next(t))})}AddTaskMkdir(t){return Object(k.a)(this,void 0,void 0,(function*(){return this.AddTask({handler:"mkdir",params:t})}))}}return t.\u0275fac=function(e){return new(e||t)(a.ic($.a))},t.\u0275prov=a.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),E=(()=>{class t extends _.b{constructor(t){super(),this.tasksQueueService=t,this.trigger=new g.a;const e=this;this.clipboard$=new class extends _.c{constructor(){var t;super(...arguments),this.prerequest$=e.trigger.pipe((t=[{clipboard:e},[]],e=>e.lift(new S(t))))}},this.clipboard$.deploy(),this.clipboard$.getOutput().subscribe(),this.trigger.next(1)}commit(){this.trigger.next(1)}post(t,...e){return Object(k.a)(this,void 0,void 0,(function*(){const n=this.values.filter(t=>e.some(e=>e===t.oper)).map(e=>{const n=()=>({srcFs:`${e.srcRemote}:`,srcRemote:e.srcItem.Path,dstFs:`${t.remote}:`,dstRemote:[t.path,e.srcItem.Name].join("/")}),i=()=>({srcFs:`${e.srcRemote}:${e.srcItem.Path}`,dstFs:`${t.remote}:${[t.path,e.srcItem.Name].join("/")}`});let c="";const o=[{},[]];return"copy"===e.oper?(c=e.srcItem.IsDir?"synccopy":"copyfile",o[0]=e.srcItem.IsDir?i():n()):"move"===e.oper?(c=e.srcItem.IsDir?"syncmove":"movefile",o[0]=e.srcItem.IsDir?i():n()):"del"===e.oper&&(c=e.srcItem.IsDir?"purge":"delfile",o[0]={srcFs:`${e.srcRemote}:`,srcRemote:e.srcItem.Path}),{handler:c,params:o}}),i=this.tasksQueueService.AddPack(n);return this.clear(...e),this.commit(),i}))}}return t.\u0275fac=function(e){return new(e||t)(a.ic(T))},t.\u0275prov=a.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const A=["remotesTable"];function V(t,e){if(1&t&&(a.ec(0,"td"),a.Uc(1),a.dc(),a.ec(2,"td"),a.Uc(3),a.dc(),a.ec(4,"td"),a.ec(5,"button",2),a.Uc(6,"Detail"),a.dc(),a.dc()),2&t){const t=e.$implicit;a.Mb(1),a.Vc(t.srcRemote),a.Mb(2),a.Vc(t.srcItem.Path)}}let q=(()=>{class t{constructor(t){this.service=t,this.columns=[{key:"srcRemote",title:"Remote",width:"10%"},{key:"srcItem.Path",title:"Path",width:"80%"},{key:"",title:"Action",width:"10%"}],this.data=[]}ngOnInit(){this.service.clipboard$.getOutput().subscribe(t=>{0===t[1].length&&(this.data=t[0].clipboard.values.filter(t=>t.oper===this.oper))}),this.configuration=Object.assign({},s.c),this.configuration.detailsTemplate=!0,this.configuration.tableLayout.hover=!0}toggleDatail(t,e){t.preventDefault(),this.table.apiEvent({type:s.a.toggleRowIndex,value:e})}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(E))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-clipboard-remotes-table"]],viewQuery:function(t,e){var n;1&t&&a.Zc(A,!0),2&t&&a.Fc(n=a.nc())&&(e.table=n.first)},inputs:{oper:"oper"},decls:3,vars:4,consts:[[3,"configuration","data","id","columns"],["remotesTable",""],["nbButton",""]],template:function(t,e){1&t&&(a.ec(0,"ngx-table",0,1),a.Sc(2,V,7,2,"ng-template"),a.dc()),2&t&&a.wc("configuration",e.configuration)("data",e.data)("id","remotes-tab-"+e.oper)("columns",e.columns)},directives:[s.b,o.n],encapsulation:2}),t})();function F(t,e){if(1&t){const t=a.fc();a.cc(0),a.ec(1,"div",7),a.ec(2,"button",8),a.mc("click",(function(){return a.Kc(t),a.oc(2).dialog.close(!0)})),a.Zb(3,"nb-icon",9),a.Uc(4," Confirm "),a.dc(),a.dc(),a.bc()}}function N(t,e){if(1&t&&(a.ec(0,"nb-tab",4),a.Sc(1,F,5,0,"ng-container",5),a.Zb(2,"app-clipboard-remotes-table",6),a.dc()),2&t){const t=e.$implicit;a.wc("tabTitle",t.title)("tabIcon",t.icon)("badgeText",t.len),a.Mb(1),a.wc("ngIf","del"===t.oper),a.Mb(1),a.wc("oper",t.oper)}}let U=(()=>{class t{constructor(t,e){this.service=t,this.dialog=e,this.data=[{oper:"copy",title:"Copy",icon:"copy",len:0},{oper:"move",title:"Move",icon:"move",len:0},{oper:"del",title:"Delete",icon:"trash-2",len:0}],this.context=e.context}ngOnInit(){this.service.clipboard$.getOutput().subscribe(t=>{0===t[1].length&&this.data.forEach(e=>e.len=t[0].clipboard.countManipulation(e.oper))})}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(E),a.Yb(f.d))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-manager-clipboard-dialog"]],decls:8,vars:1,consts:[[1,"dialog-card"],["icon","shopping-bag",1,"clipboard-icon"],["fullWidth",""],["badgeStatus","primary",3,"tabTitle","tabIcon","badgeText",4,"ngFor","ngForOf"],["badgeStatus","primary",3,"tabTitle","tabIcon","badgeText"],[4,"ngIf"],[3,"oper"],[2,"display","flex","justify-content","center"],["nbButton","","status","danger",3,"click"],["icon","alert-triangle"]],template:function(t,e){1&t&&(a.ec(0,"nb-card",0),a.ec(1,"nb-card-header"),a.ec(2,"nb-action"),a.Zb(3,"nb-icon",1),a.dc(),a.Uc(4," Clipboard "),a.dc(),a.ec(5,"nb-card-body"),a.ec(6,"nb-tabset",2),a.Sc(7,N,3,5,"nb-tab",3),a.dc(),a.dc(),a.dc()),2&t&&(a.Mb(7),a.wc("ngForOf",e.data))},directives:[o.r,o.u,o.f,o.C,o.q,o.eb,i.n,o.db,i.o,q,o.n],styles:["nb-card-footer[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t.dialog-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 3px);\n\t\t\t}\n\t\t\t[_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0;\n\t\t\t}\n\t\t\t.clipboard-icon[_ngcontent-%COMP%] {\n\t\t\t\tfont-size: 1.5rem;\n\t\t\t\tmargin-right: 0.5rem;\n\t\t\t}"]}),t})(),B=(()=>{class t{constructor(t){this.dialog=t,this.context=t.context}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(f.d))},t.\u0275cmp=a.Sb({type:t,selectors:[["ng-component"]],decls:12,vars:0,consts:[["icon","info-outline","nbTooltip","support recursively create. (eg: a/b/c)",1,"push-to-right",2,"font-size","1.5rem"],["nbInput","","fullWidth",""],["newDir",""],["nbButton","","status","danger",3,"click"],["nbButton","","status","success",1,"push-to-right",3,"click"]],template:function(t,e){if(1&t){const t=a.fc();a.ec(0,"nb-card"),a.ec(1,"nb-card-header"),a.Uc(2," Create Directory "),a.Zb(3,"nb-icon",0),a.dc(),a.ec(4,"nb-card-body"),a.Zb(5,"input",1,2),a.dc(),a.ec(7,"nb-card-footer"),a.ec(8,"button",3),a.mc("click",(function(){return e.dialog.dismiss()})),a.Uc(9,"Close"),a.dc(),a.ec(10,"button",4),a.mc("click",(function(){a.Kc(t);const n=a.Gc(6);return e.dialog.close(n.value)})),a.Uc(11," Confirm "),a.dc(),a.dc(),a.dc()}},directives:[o.r,o.u,o.C,o.jb,o.q,o.F,o.s,o.n],styles:["nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 5px);\n\t\t\t}\n\t\t\tnb-card-header[_ngcontent-%COMP%], nb-card-footer[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t}"]}),t})();var Z=n("itXk"),K=n("NzlE"),R=n("Jmhc");let z=(()=>{class t{constructor(t,e,n,i){this.cmdService=t,this.toastr=e,this.fileSaverService=n,this.serverSettingService=i,this.trigger=new g.a;const c=this;this.download$=new class extends M.h{constructor(){super(...arguments),this.prerequest$=c.trigger.pipe(Object(y.a)(c.cmdService.connection$.getOutput(),c.serverSettingService.options$.getOutput()),Object(w.a)(([t,e,n])=>0!==n[1].length?[{},n[1]]:Object(M.q)(n[0].options,"rc","Serve")?[Object.assign(Object.assign({},e[0]),t),e[1]]:[{},[new Error("rc-serve is closed. (Tip: Set server option: rc.Serve as true)")]]))}},this.download$.deploy(),this.download$.getSupersetOutput().subscribe(t=>{0===t[1].length?this.fileSaverService.save(t[0].ajaxRsp.response,t[0].Name):this.toastr.danger(`${t[0].remote}:${t[0].Path}`,"File download failure.")})}post(t){this.trigger.next(t),this.toastr.default(t.Name,"Downloading ...")}}return t.\u0275fac=function(e){return new(e||t)(a.ic($.a),a.ic(o.ib),a.ic(u),a.ic(R.a))},t.\u0275prov=a.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const L=["EnableServe"];function Q(t,e){if(1&t){const t=a.fc();a.ec(0,"button",6),a.mc("click",(function(){return a.Kc(t),a.oc(2).download()})),a.Uc(1,"download"),a.dc()}}function Y(t,e){if(1&t&&a.Zb(0,"app-rng-space-usage-chart",7),2&t){const t=a.oc(2);a.wc("loading",t.loadingAbout)}}function H(t,e){if(1&t&&(a.ec(0,"div",2),a.Zb(1,"img",3),a.ec(2,"h5"),a.Uc(3),a.dc(),a.Sc(4,Q,2,0,"button",4),a.Sc(5,Y,1,1,"app-rng-space-usage-chart",5),a.dc()),2&t){const t=a.oc();a.Mb(1),a.wc("src","assets/icons/"+t.typeIcon,a.Nc),a.Mb(2),a.Vc(t.name),a.Mb(1),a.wc("ngIf",!t.isDir),a.Mb(1),a.wc("ngIf",t.isDir)}}function J(t,e){1&t&&(a.ec(0,"div",8),a.ec(1,"h3"),a.Uc(2,'Are you want to enable "rc.Serve"?'),a.dc(),a.ec(3,"span",9),a.Uc(4,' Download featrue needs to enable server option "rc.Serve". '),a.dc(),a.ec(5,"p",10),a.Uc(6,' Nb: You can manually close it in "server setting" page after download completed. '),a.dc(),a.dc(),a.ec(7,"div",11),a.ec(8,"button",12),a.mc("click",(function(){return e.dialogRef.close(!0)})),a.Uc(9," OK "),a.dc(),a.ec(10,"button",13),a.mc("click",(function(){return e.dialogRef.close(!1)})),a.Uc(11," Cancel "),a.dc(),a.dc())}let W=(()=>{class t{constructor(t,e,n,i,c){this.downloadService=t,this.serverSettingService=e,this.modal=n,this.toastrService=i,this.cmdService=c,this.currentDirDetail=!0,this.remote="",this.path="",this.name="",this.isDir=!0,this.typeIcon="",this.downloadTrigger=new g.a,this.aboutTrigger=new g.a,this.loadingAbout=!1}itemNode(t){this.remote=t.remote||"",this.path=t.Path||"",this.name=t.Name||"",this.isDir=t.IsDir,this.typeIcon=t.TypeIcon,""!==this.remote&&""!==this.path&&""!==this.name&&(this.currentDirDetail=!1),!this.currentDirDetail&&this.isDir&&(this.loadingAbout=!0,this.aboutTrigger.next({remote:this.remote,path:this.path}))}download(){this.downloadTrigger.next(1)}realDownload(){this.downloadService.post({remote:this.remote,Path:this.path,Name:this.name})}ngOnInit(){const t=this;this.loadingAbout=!0;const e=new class extends M.v{constructor(){super(...arguments),this.prerequest$=Object(Z.a)([t.aboutTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(w.a)(([t,e])=>0!==e[1].length?[{},e[1]]:[Object.assign(Object.assign({},e[0]),t),[]]))}};e.deploy(),e.getOutput().subscribe(t=>{}),this.about$=new class extends M.s{constructor(){super(...arguments),this.prerequest$=e.getSupersetOutput()}},this.about$.deploy(),this.about$.getOutput().subscribe(t=>{this.loadingAbout=!1,0===t[1].length&&(this.chart.data=t[0].about)}),this.downloadTrigger.pipe(Object(y.a)(this.serverSettingService.options$.getOutput())).subscribe(([,t])=>{Object(M.q)(t[0].options,"rc","Serve")?this.modal.confirm().className("flat-attack").message(`Are you sure want to download ${this.name} ?`).isBlocking(!1).open().result.then(t=>{t&&this.realDownload()},()=>{}):this.modal.open(this.EnableServe,Object(f.m)({isBlocking:!1,className:"flat-attack"},m.b)).result.then(t=>{t&&(this.serverSettingService.setOption({rc:{Serve:!0}}),this.toastrService.default("Download","Try to download again."))},()=>{})}),this.initNode&&setTimeout(()=>{this.itemNode(this.initNode)},100)}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(z),a.Yb(R.a),a.Yb(m.a),a.Yb(o.ib),a.Yb($.a))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-file-file-detail"]],viewQuery:function(t,e){var n;1&t&&(a.Zc(L,!0),a.Zc(K.a,!0)),2&t&&(a.Fc(n=a.nc())&&(e.EnableServe=n.first),a.Fc(n=a.nc())&&(e.chart=n.first))},inputs:{initNode:"initNode"},decls:3,vars:1,consts:[["class","detail",4,"ngIf"],["EnableServe",""],[1,"detail"],[3,"src"],["nbButton","",3,"click",4,"ngIf"],[3,"loading",4,"ngIf"],["nbButton","",3,"click"],[3,"loading"],[1,"vex-dialog-message"],[2,"padding","1rem 0.5rem"],[2,"text-indent","1rem"],[1,"vex-dialog-buttons"],["type","button",1,"vex-dialog-button","vex-dialog-button-primary","vex-first",3,"click"],["type","button",1,"vex-dialog-button","vex-dialog-button-secondary","vex-last",3,"click"]],template:function(t,e){1&t&&(a.Sc(0,H,6,4,"div",0),a.Sc(1,J,12,0,"ng-template",null,1,a.Tc)),2&t&&a.wc("ngIf",!e.currentDirDetail)},directives:[i.o,o.n,K.a],styles:["div.detail[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0 1.25rem;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}\n\t\t\timg[_ngcontent-%COMP%] {\n\t\t\t\twidth: 8rem;\n\t\t\t\tmargin: 0 auto;\n\t\t\t}\n\t\t\th5[_ngcontent-%COMP%] {\n\t\t\t\toverflow-wrap: break-word;\n\t\t\t}\n\t\t\t.vex-dialog-message[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}"]}),t})();var G=n("pLZG");const X=["table"];function tt(t,e){if(1&t){const t=a.fc();a.ec(0,"nb-checkbox",3),a.mc("indeterminateChange",(function(e){return a.Kc(t),a.oc().checAllInteral=e}))("checkedChange",(function(e){return a.Kc(t),a.oc().checkAll=e}))("checkedChange",(function(e){return a.Kc(t),a.oc().onToggleAll(e)})),a.dc()}if(2&t){const t=a.oc();a.wc("indeterminate",t.checAllInteral)("checked",t.checkAll)}}function et(t,e){if(1&t&&a.Zb(0,"nb-icon",11),2&t){const t=a.oc().$implicit;a.wc("icon",t.ManipulateIcon)}}function nt(t,e){if(1&t){const t=a.fc();a.ec(0,"td",4),a.mc("dblclick",(function(e){return a.Kc(t),e.stopPropagation()}))("click",(function(n){a.Kc(t);const i=e.$implicit,c=a.oc();return c.toggle(i),c.stopEvent(n)})),a.ec(1,"nb-checkbox",5),a.mc("checkedChange",(function(n){return a.Kc(t),e.$implicit.check=n}))("checkedChange",(function(){return a.Kc(t),a.oc().onToggle()})),a.dc(),a.dc(),a.ec(2,"td",6),a.mc("click",(function(n){a.Kc(t);const i=e.$implicit,c=a.oc();return c.toggle(i),c.stopEvent(n)}))("dblclick",(function(e){return a.Kc(t),a.oc().stopEvent(e)})),a.Sc(3,et,1,1,"nb-icon",7),a.dc(),a.ec(4,"td",8),a.Zb(5,"img",9),a.dc(),a.ec(6,"td",10),a.Uc(7),a.dc(),a.ec(8,"td",10),a.Uc(9),a.dc(),a.ec(10,"td",10),a.Uc(11),a.dc(),a.ec(12,"td",10),a.Uc(13),a.dc()}if(2&t){const t=e.$implicit;a.Mb(1),a.wc("checked",t.check),a.Mb(2),a.wc("ngIf",t.ManipulateIcon),a.Mb(2),a.wc("src","assets/icons/"+t.TypeIcon,a.Nc),a.Mb(2),a.Vc(t.Name),a.Mb(2),a.Vc(t.SizeHumanReadable),a.Mb(2),a.Vc(t.ModTimeHumanReadable),a.Mb(2),a.Vc(t.MimeType)}}let it=(()=>{class t{constructor(t){this.clipboardService=t,this.columns=[{key:"manipulation",title:"",width:"3%",searchEnabled:!1,orderEnabled:!1},{key:"TypeIcon",title:"",width:"3%",searchEnabled:!1},{key:"Name",title:"Name",width:"50%"},{key:"Size",title:"Size",width:"10%"},{key:"ModTimeMoment",title:"Modified Time",width:"17%"},{key:"MimeType",title:"MIME Type",width:"17%"}],this.checkAll=!1,this.checAllInteral=!1,this.jump=new a.r,this.showDetail=new a.r}loading(){this.configuration.isLoading=!0,this.checkAll=!1,this.table.apiEvent({type:s.a.setPaginationCurrentPage,value:1})}eventEmitted(t){if("onDoubleClick"===t.event){const e=t.value.row;e.IsDir&&(this.jump.emit({remote:this.remote,path:e.Path}),this.loading())}else"onClick"===t.event&&this.pcDetailViewEnable?this.showDetail.emit(t.value.row):"onRowContextMenu"!==t.event||this.pcDetailViewEnable||this.showDetail.emit(t.value.row)}onToggleAll(t){this.data.forEach(e=>e.check=t),this.checAllInteral=!1}onToggle(){const t=this.data.map(t=>+!!t.check).reduce((t,e)=>t+e);t===this.data.length?(this.checkAll=!0,this.checAllInteral=!1):0===t?(this.checkAll=!1,this.checAllInteral=!1):(this.checkAll=!1,this.checAllInteral=!0)}toggle(t){t.check=!t.check,this.onToggle()}manipulate(t){this.data.forEach(e=>{e.check&&(this.clipboardService.add(t,this.remote,e),e.check=!1,e.ManipulateIcon=Object(_.e)(t))}),this.onToggle()}ngOnInit(){this.configuration=Object.assign({},s.c),this.configuration.searchEnabled=!0,this.configuration.checkboxes=!0,this.configuration.isLoading=!0,this.configuration.showContextMenu=!0,this.listScrb=this.listExtends$.getOutput().subscribe(t=>{this.checkAll=!1,this.configuration.isLoading=!1,0===t[1].length?(this.remote=t[0].remote,this.data=t[0].list,this.data.forEach(t=>{t.check=!1,t.ManipulateIcon=Object(_.e)(t.Manipulation)})):this.data=void 0})}ngOnDestroy(){this.listScrb.unsubscribe(),this.loading()}stopEvent(t){t.stopPropagation(),t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(E))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-manager-list-view"]],viewQuery:function(t,e){var n;1&t&&a.Zc(X,!0),2&t&&a.Fc(n=a.nc())&&(e.table=n.first)},inputs:{listExtends$:"listExtends$",pcDetailViewEnable:"pcDetailViewEnable"},outputs:{jump:"jump",showDetail:"showDetail"},decls:5,vars:4,consts:[["secAll",""],[3,"configuration","data","columns","selectAllTemplate","event"],["table",""],[3,"indeterminate","checked","indeterminateChange","checkedChange"],[3,"dblclick","click"],[3,"checked","checkedChange"],[3,"click","dblclick"],["class","manipulation","status","info",3,"icon",4,"ngIf"],[1,"rng-noselect",2,"padding","0"],[3,"src"],[1,"rng-noselect"],["status","info",1,"manipulation",3,"icon"]],template:function(t,e){if(1&t&&(a.Sc(0,tt,1,2,"ng-template",null,0,a.Tc),a.ec(2,"ngx-table",1,2),a.mc("event",(function(t){return e.eventEmitted(t)})),a.Sc(4,nt,14,7,"ng-template"),a.dc()),2&t){const t=a.Gc(1);a.Mb(2),a.wc("configuration",e.configuration)("data",e.data)("columns",e.columns)("selectAllTemplate",t)}},directives:[s.b,o.w,i.o,o.C],styles:["nb-icon.manipulation[_ngcontent-%COMP%] {\n\t\t\t\t\n\t\t\t\tfont-size: 0.625rem;\n\t\t\t\theight: 0.75rem;\n\t\t\t\twidth: 0.75rem;\n\t\t\t\tmargin-top: -0.125rem;\n\t\t\t\tmargin-bottom: -0.125rem;\n\t\t\t}"]}),t})(),ct=(()=>{class t{constructor(t,e){this.connectService=t,this.clipboard=e,this.jump=new a.r,this.showDetail=new a.r,this.listTrigger=new g.a}loading(){this.listView.loading()}refresh(){this.loading(),this.list$.clearCache(),this.listTrigger.next(1)}manipulate(t){this.listView.manipulate(t),this.clipboard.commit()}ngOnInit(){const t=this;this.list$=new class extends M.w{constructor(){super(...arguments),this.prerequest$=Object(Z.a)([t.listTrigger,t.nav$.getOutput(),t.connectService.listCmd$.verify(this.cmd)]).pipe(Object(w.a)(([,t,e])=>0!==t[1].length||0!==e[1].length?[{},[].concat(t[1],e[1])]:[Object.assign(Object.assign({},t[0]),e[0]),[]]),Object(G.a)(t=>0!==t[1].length||!!t[0].remote))}},this.list$.deploy(),this.listExtends$=new class extends _.f{constructor(){super(...arguments),this.prerequest$=Object(Z.a)([t.list$.getSupersetOutput(),t.clipboard.clipboard$.getOutput()]).pipe(Object(w.a)(([t,e])=>[Object.assign(Object.assign({},t[0]),e[0]),[].concat(t[1],e[1])]))}},this.listExtends$.deploy(),this.listTrigger.next(1)}}return t.\u0275fac=function(e){return new(e||t)(a.Yb($.a),a.Yb(E))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-manager-file-mode"]],viewQuery:function(t,e){var n;1&t&&a.Zc(it,!0),2&t&&a.Fc(n=a.nc())&&(e.listView=n.first)},inputs:{nav$:"nav$",pcDetailViewEnable:"pcDetailViewEnable"},outputs:{jump:"jump",showDetail:"showDetail"},decls:1,vars:2,consts:[[3,"listExtends$","pcDetailViewEnable","jump","showDetail"]],template:function(t,e){1&t&&(a.ec(0,"app-manager-list-view",0),a.mc("jump",(function(t){return e.jump.emit(t)}))("showDetail",(function(t){return e.showDetail.emit(t)})),a.dc()),2&t&&a.wc("listExtends$",e.listExtends$)("pcDetailViewEnable",e.pcDetailViewEnable)},directives:[it],encapsulation:2}),t})();function ot(t,e){if(1&t&&(a.cc(0),a.ec(1,"tr"),a.ec(2,"td"),a.ec(3,"p"),a.Uc(4),a.dc(),a.dc(),a.dc(),a.ec(5,"tr"),a.ec(6,"td",6),a.Zb(7,"nb-progress-bar",7),a.dc(),a.dc(),a.bc()),2&t){const t=a.oc();a.Mb(4),a.Vc(123),a.Mb(3),a.wc("value",t.value)("displayValue",!0)}}let rt=(()=>{class t{constructor(){this.title="unknow",this.subtitle="",this.value=0,this.easyMode=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Sb({type:t,selectors:[["app-home-view-remote"]],inputs:{title:"title",subtitle:"subtitle",value:"value",easyMode:"easyMode"},decls:8,vars:3,consts:[[1,"grid-container"],["rowspan","2",2,"padding-right","1rem"],["icon","hard-drive"],[2,"width","100%"],[1,"rng-noselect"],[4,"ngIf"],["colspan","2"],["size","tiny",3,"value","displayValue"]],template:function(t,e){1&t&&(a.ec(0,"table",0),a.ec(1,"tr"),a.ec(2,"td",1),a.Zb(3,"nb-icon",2),a.dc(),a.ec(4,"td",3),a.ec(5,"p",4),a.Uc(6),a.dc(),a.dc(),a.dc(),a.Sc(7,ot,8,3,"ng-container",5),a.dc()),2&t&&(a.Mb(4),a.Nb("rowspan",e.easyMode?2:1),a.Mb(2),a.Vc(e.title),a.Mb(1),a.wc("ngIf",!e.easyMode))},directives:[o.C,i.o,o.T],styles:[".grid-container[_ngcontent-%COMP%] {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 4rem;\n\t\t\t\tcursor: pointer;\n\t\t\t\t\n\t\t\t}\n\t\t\ttd[_ngcontent-%COMP%]    > p[_ngcontent-%COMP%] {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}"]}),t})();function st(t,e){if(1&t){const t=a.fc();a.ec(0,"app-home-view-remote",5),a.mc("click",(function(){a.Kc(t);const e=a.oc().$implicit;return a.oc().showDetail.emit({remote:e})}))("dblclick",(function(){a.Kc(t);const e=a.oc().$implicit;return a.oc().jump.emit({remote:e})})),a.dc()}if(2&t){const t=a.oc().$implicit;a.wc("easyMode",!0)("title",t)}}function at(t,e){if(1&t){const t=a.fc();a.ec(0,"app-home-view-remote",6),a.mc("contextmenu",(function(e){a.Kc(t);const n=a.oc().$implicit;return a.oc().showDetail.emit({remote:n}),e.preventDefault(),e.stopPropagation()}))("dblclick",(function(){a.Kc(t);const e=a.oc().$implicit;return a.oc().jump.emit({remote:e})})),a.dc()}if(2&t){const t=a.oc().$implicit;a.wc("easyMode",!0)("title",t)}}const lt=function(t,e){return{"cloud col-sm-6":!0,"col-xl-3 col-md-4":t,"col-lg-4 col-md-6":e}},ut=function(){return["xs"]};function dt(t,e){if(1&t&&(a.ec(0,"div",2),a.Sc(1,st,1,2,"app-home-view-remote",3),a.Sc(2,at,1,2,"app-home-view-remote",4),a.dc()),2&t){const t=a.oc();a.wc("ngClass",a.Bc(3,lt,!t.pcDetailView,t.pcDetailView)),a.Mb(1),a.wc("hideItBootstrap",a.zc(6,ut)),a.Mb(1),a.wc("showItBootstrap",a.zc(7,ut))}}let ht=(()=>{class t{constructor(t){this.cmdService=t,this.remotes=[],this.jump=new a.r,this.showDetail=new a.r,this.remotesTrigger=new g.a,this.isLoading=!0}loading(){this.isLoading=!0}refresh(){this.loading(),this.remotes$.clearCache(),this.remotesTrigger.next(1)}ngOnInit(){this.loading();const t=this;this.remotes$=new class extends M.l{constructor(){super(...arguments),this.prerequest$=Object(Z.a)([t.remotesTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(w.a)(([,t])=>t))}},this.remotes$.deploy(),this.remotesTrigger.next(1),this.remotes$.getOutput().subscribe(t=>{this.isLoading=!1,0===t[1].length&&(this.remotes=t[0].remotes)})}}return t.\u0275fac=function(e){return new(e||t)(a.Yb($.a))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-manager-home-mode"]],inputs:{pcDetailView:"pcDetailView"},outputs:{jump:"jump",showDetail:"showDetail"},decls:2,vars:2,consts:[["nbSpinnerSize","giant","nbSpinnerStatus","primary","nbSpinnerMessage","Loading...",1,"row","justify-content-start",3,"nbSpinner"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"easyMode","title","click","dblclick",4,"hideItBootstrap"],[3,"easyMode","title","contextmenu","dblclick",4,"showItBootstrap"],[3,"easyMode","title","click","dblclick"],[3,"easyMode","title","contextmenu","dblclick"]],template:function(t,e){1&t&&(a.ec(0,"div",0),a.Sc(1,dt,3,8,"div",1),a.dc()),2&t&&(a.wc("nbSpinner",e.isLoading),a.Mb(1),a.wc("ngForOf",e.remotes))},directives:[o.ab,i.n,i.l,h.a,h.e,rt],styles:[".cloud[_ngcontent-%COMP%]{border-radius:.25rem}.cloud[_ngcontent-%COMP%]:hover{background-color:rgba(89,139,255,.53)}"]}),t})();function pt(t,e){if(1&t&&(a.ec(0,"nb-list-item"),a.Zb(1,"nb-icon",4),a.ec(2,"div"),a.Uc(3),a.dc(),a.dc()),2&t){const t=e.$implicit;a.Mb(1),a.wc("icon",t.v?"checkmark-circle":"close-circle-outline")("status",t.v?"success":"danger"),a.Mb(2),a.Vc(t.k)}}function bt(t,e){if(1&t&&(a.ec(0,"nb-accordion-item"),a.ec(1,"nb-accordion-item-header"),a.Uc(2,"Feature"),a.dc(),a.ec(3,"nb-accordion-item-body"),a.ec(4,"nb-list",2),a.Sc(5,pt,4,3,"nb-list-item",3),a.dc(),a.dc(),a.dc()),2&t){const t=a.oc();a.Mb(4),a.wc("nbSpinner",t.loadingFsinfo),a.Mb(1),a.wc("ngForOf",t.feature)}}function ft(t,e){if(1&t&&(a.ec(0,"nb-list-item"),a.ec(1,"div"),a.Uc(2),a.dc(),a.dc()),2&t){const t=e.$implicit;a.Mb(2),a.Vc(t)}}function mt(t,e){if(1&t&&(a.ec(0,"nb-accordion-item"),a.ec(1,"nb-accordion-item-header"),a.Uc(2,"Hash Support"),a.dc(),a.ec(3,"nb-accordion-item-body"),a.ec(4,"nb-list",2),a.Sc(5,ft,3,1,"nb-list-item",3),a.dc(),a.dc(),a.dc()),2&t){const t=a.oc();a.Mb(4),a.wc("nbSpinner",t.loadingFsinfo),a.Mb(1),a.wc("ngForOf",t.hashes)}}let gt=(()=>{class t{constructor(t){this.cmdService=t,this.remote="",this.loadingFsinfo=!1,this.loadingAbout=!1,this.feature=[],this.hashes=[],this.trigger=new g.a}navNode(t){this.remote=t.remote||"",this.loadingFsinfo=!0,this.loadingAbout=!0,this.trigger.next(t.remote)}ngOnInit(){const t=this;this.loadingFsinfo=!1,this.loadingAbout=!1,this.fsinfo$=new class extends M.v{constructor(){super(...arguments),this.prerequest$=Object(Z.a)([t.trigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(w.a)(([t,e])=>0!==e[1].length?[{},e[1]]:[Object.assign(Object.assign({},e[0]),{remote:t}),[]]))}},this.fsinfo$.deploy(),this.fsinfo$.getOutput().subscribe(t=>{if(this.loadingFsinfo=!1,0!==t[1].length)return;const e=t[0]["fs-info"];this.feature=Object.keys(e.Features).map(t=>({k:t,v:e.Features[t]})),this.hashes=e.Hashes}),this.about$=new class extends M.s{constructor(){super(...arguments),this.prerequest$=t.fsinfo$.getSupersetOutput()}},this.about$.deploy(),this.about$.getOutput().subscribe(t=>{this.loadingAbout=!1,0===t[1].length&&(this.chart.data=t[0].about)}),this.initNode&&setTimeout(()=>{this.navNode(this.initNode)},100)}}return t.\u0275fac=function(e){return new(e||t)(a.Yb($.a))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-home-remote-detail"]],viewQuery:function(t,e){var n;1&t&&a.Zc(K.a,!0),2&t&&a.Fc(n=a.nc())&&(e.chart=n.first)},inputs:{initNode:"initNode"},decls:6,vars:4,consts:[[3,"loading"],[4,"ngIf"],["nbSpinnerSize","giant","nbSpinnerStatus","primary",3,"nbSpinner"],[4,"ngFor","ngForOf"],[3,"icon","status"]],template:function(t,e){1&t&&(a.ec(0,"h5"),a.Uc(1),a.dc(),a.Zb(2,"app-rng-space-usage-chart",0),a.ec(3,"nb-accordion"),a.Sc(4,bt,6,2,"nb-accordion-item",1),a.Sc(5,mt,6,2,"nb-accordion-item",1),a.dc()),2&t&&(a.Mb(1),a.Vc(e.remote),a.Mb(1),a.wc("loading",e.loadingAbout),a.Mb(2),a.wc("ngIf",e.feature.length),a.Mb(1),a.wc("ngIf",e.hashes.length))},directives:[K.a,o.a,i.o,o.c,o.d,o.b,o.M,o.ab,i.n,o.N,o.C],styles:["h5[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0 1.25rem;\n\t\t\t}\n\t\t\tnb-list[_ngcontent-%COMP%] {\n\t\t\t\tmargin: 0 -0.5rem;\n\t\t\t}\n\t\t\tnb-list-item[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0.5rem 0;\n\t\t\t}\n\t\t\tnb-list-item[_ngcontent-%COMP%]    > nb-icon[_ngcontent-%COMP%] {\n\t\t\t\twidth: 1rem;\n\t\t\t\theight: 1rem;\n\t\t\t}\n\t\t\tnb-list-item[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\n\t\t\t\tpadding-left: 0.5rem;\n\t\t\t}"]}),t})();function vt(t,e){if(1&t){const t=a.fc();a.ec(0,"a",9),a.mc("click",(function(){return a.Kc(t),a.oc(2).jump.emit({})})),a.Zb(1,"nb-icon",10),a.dc()}}function wt(t,e){1&t&&a.Zb(0,"nb-icon",10)}function yt(t,e){if(1&t){const t=a.fc();a.ec(0,"a",9),a.mc("click",(function(){a.Kc(t);const e=a.oc(3);return e.jump.emit(e.genAddr(-1))})),a.Zb(1,"nb-icon",13),a.Uc(2),a.dc()}if(2&t){const t=a.oc(3);a.Mb(2),a.Wc(" ",t.remote," ")}}function Ot(t,e){if(1&t&&(a.ec(0,"div",14),a.Zb(1,"nb-icon",13),a.Uc(2),a.dc()),2&t){const t=a.oc(3);a.Mb(2),a.Wc(" ",t.remote," ")}}const _t=function(t){return{"breadcrumb-item":!0,active:t}};function Mt(t,e){if(1&t&&(a.ec(0,"li",11),a.Sc(1,yt,3,1,"a",4),a.Sc(2,Ot,3,1,"div",12),a.dc()),2&t){const t=a.oc(2);a.wc("ngClass",a.Ac(3,_t,!t.path)),a.Mb(1),a.wc("ngIf",t.path),a.Mb(1),a.wc("ngIf",!t.path)}}function kt(t,e){if(1&t){const t=a.fc();a.ec(0,"li",15),a.ec(1,"a",9),a.mc("click",(function(){a.Kc(t);const n=e.index,i=a.oc(2);return i.jump.emit(i.genAddr(n))})),a.Uc(2),a.dc(),a.dc()}if(2&t){const t=e.$implicit;a.Mb(2),a.Wc(" ",t," ")}}function xt(t,e){if(1&t&&(a.ec(0,"li",15),a.ec(1,"span",16),a.Uc(2),a.dc(),a.dc()),2&t){const t=a.oc(2);a.Mb(2),a.Vc(t.pathSurfix)}}function St(t,e){if(1&t){const t=a.fc();a.ec(0,"ol",2),a.mc("click",(function(){return a.Kc(t),a.oc().editTip()}))("dblclick",(function(){a.Kc(t);const e=a.oc();return e.editMode=!e.editMode})),a.ec(1,"li",3),a.Sc(2,vt,2,0,"a",4),a.Sc(3,wt,1,0,"nb-icon",5),a.dc(),a.Sc(4,Mt,3,5,"li",6),a.Sc(5,kt,3,1,"li",7),a.Sc(6,xt,3,1,"li",8),a.dc()}if(2&t){const t=a.oc();a.Mb(2),a.wc("ngIf",t.remote),a.Mb(1),a.wc("ngIf",!t.remote),a.Mb(1),a.wc("ngIf",t.remote),a.Mb(1),a.wc("ngForOf",t.pathPrefix),a.Mb(1),a.wc("ngIf",t.pathSurfix)}}function It(t,e){if(1&t){const t=a.fc();a.ec(0,"input",17),a.mc("dblclick",(function(){a.Kc(t);const e=a.oc();return e.editMode=!e.editMode}))("ngModelChange",(function(e){return a.Kc(t),a.oc().fullPath=e}))("keyup.enter",(function(){return a.Kc(t),a.oc().editorJump()})),a.dc()}if(2&t){const t=a.oc();a.wc("ngModel",t.fullPath)}}let Ct=(()=>{class t{constructor(t){this.toastrService=t,this.jump=new a.r,this.editMode=!1}editTip(){t.tipable&&(this.toastrService.default("Edit Mode will be actived after double click.","Breadcurmb",{position:o.B.BOTTOM_END,icon:"bulb",duration:5e3}),t.tipable=!1)}editorJump(){if("string"==typeof this.fullPath)if(""!==this.fullPath){const t=this.fullPath.indexOf(":");t>-1?(this.remote=this.fullPath.substring(0,t),this.path=this.fullPath.substring(t+1),this.path.length>1&&this.path.endsWith("/")&&(this.path=this.path.slice(0,this.path.length-1))):(this.remote=this.fullPath,this.path=""),this.jump.emit({remote:this.remote,path:this.path})}else this.remote&&""!==this.remote&&this.jump.emit({});this.editMode=!this.editMode}genAddr(t){return""===this.pathPrefix.slice(0,t+1).join("/")?{remote:this.remote}:{remote:this.remote,path:this.pathPrefix.slice(0,t+1).join("/")}}splitPath(t){if(!t)return[[],void 0];const e=t.split("/");return[e.slice(0,-1),e[e.length-1]]}ngOnInit(){this.nav$.getOutput().subscribe(t=>{this.remote=t[0].remote,[this.pathPrefix,this.pathSurfix]=this.splitPath(t[0].path),this.path=t[0].path,this.fullPath=`${this.remote?this.remote+":":""}${this.path?this.path:""}`})}}return t.tipable=!0,t.\u0275fac=function(e){return new(e||t)(a.Yb(o.ib))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-manager-breadcrumb"]],inputs:{nav$:"nav$"},outputs:{jump:"jump"},decls:2,vars:2,consts:[["class","breadcrumb rng-noselect","style","flex-wrap: nowrap; overflow-x: auto;",3,"click","dblclick",4,"ngIf"],["nbInput","","class","editor","fullWidth","",3,"ngModel","dblclick","ngModelChange","keyup.enter",4,"ngIf"],[1,"breadcrumb","rng-noselect",2,"flex-wrap","nowrap","overflow-x","auto",3,"click","dblclick"],[1,"breadcrumb-item","home"],[3,"click",4,"ngIf"],["icon","home-outline",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","breadcrumb-item",4,"ngFor","ngForOf"],["class","breadcrumb-item",4,"ngIf"],[3,"click"],["icon","home-outline"],[3,"ngClass"],["style","display: inline-flex;",4,"ngIf"],["icon","google-outline",2,"vertical-align","middle"],[2,"display","inline-flex"],[1,"breadcrumb-item"],[1,"active"],["nbInput","","fullWidth","",1,"editor",3,"ngModel","dblclick","ngModelChange","keyup.enter"]],template:function(t,e){1&t&&(a.Sc(0,St,7,5,"ol",0),a.Sc(1,It,1,1,"input",1)),2&t&&(a.wc("ngIf",!e.editMode),a.Mb(1),a.wc("ngIf",e.editMode))},directives:[i.o,i.n,o.C,i.l,o.F,c.a,c.e,c.h],styles:[".breadcrumb[_ngcontent-%COMP%] {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t\twidth: -webkit-fill-available;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\tcursor: text;\n\t\t\t}\n\t\t\t.editor[_ngcontent-%COMP%] {\n\t\t\t\twidth: -webkit-fill-available;\n\t\t\t\t\n\t\t\t}\n\t\t\tli[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flow-root;\n\t\t\t}\n\t\t\tli[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n\t\t\t\tbackground: white;\n\t\t\t\tborder-radius: 1rem;\n\t\t\t\tpadding: 0.1545rem 0.5rem;\n\t\t\t\ttext-decoration: unset;\n\t\t\t}\n\t\t\tli[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%]:hover {\n\t\t\t\tbackground: #274bdb;\n\t\t\t\tcolor: white;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t.active[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0.1545rem 1rem 0.1545rem 0;\n\t\t\t}\n\t\t\t.home[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0.1545rem 0.5rem;\n\t\t\t}"]}),t})();const jt=["MobileRemoteDetail"],Pt=["MobileFileDetail"];function Dt(t,e){if(1&t){const t=a.fc();a.ec(0,"a",21),a.mc("click",(function(){return a.Kc(t),a.oc().toggleDetail()})),a.Zb(1,"nb-icon",22),a.dc()}}function $t(t,e){if(1&t){const t=a.fc();a.ec(0,"app-manager-home-mode",23),a.mc("jump",(function(e){return a.Kc(t),a.oc().addrJump(e)}))("showDetail",(function(e){return a.Kc(t),a.oc().openRemoteDetail(e)})),a.dc()}if(2&t){const t=a.oc();a.wc("pcDetailView",t.pcDetailView)}}function Tt(t,e){if(1&t){const t=a.fc();a.ec(0,"app-manager-file-mode",24),a.mc("jump",(function(e){return a.Kc(t),a.oc().addrJump(e)}))("showDetail",(function(e){return a.Kc(t),a.oc().openFileDetail(e)})),a.dc()}if(2&t){const t=a.oc();a.wc("pcDetailViewEnable",t.pcDetailViewEnable)("nav$",t.nav$)}}function Et(t,e){1&t&&a.Zb(0,"app-home-remote-detail")}function At(t,e){1&t&&a.Zb(0,"app-file-file-detail")}function Vt(t,e){if(1&t&&(a.ec(0,"nb-sidebar",25),a.Sc(1,Et,1,0,"app-home-remote-detail",26),a.Sc(2,At,1,0,"app-file-file-detail",26),a.dc()),2&t){const t=a.oc();a.Mb(1),a.wc("ngIf",t.homeMode),a.Mb(1),a.wc("ngIf",t.fileMode)}}function qt(t,e){1&t&&a.Zb(0,"app-home-remote-detail",27),2&t&&a.wc("initNode",e.dialogRef.context.navNode)}function Ft(t,e){1&t&&a.Zb(0,"app-file-file-detail",27),2&t&&a.wc("initNode",e.dialogRef.context.itemNode)}function Nt(t,e){if(1&t){const t=a.fc();a.ec(0,"nb-action",28),a.mc("click",(function(){return a.Kc(t),a.oc().file.manipulate("copy")})),a.dc()}}function Ut(t,e){if(1&t){const t=a.fc();a.ec(0,"nb-action",29),a.mc("click",(function(){return a.Kc(t),a.oc().file.manipulate("move")})),a.dc()}}function Bt(t,e){if(1&t){const t=a.fc();a.ec(0,"nb-action",30),a.mc("click",(function(){return a.Kc(t),a.oc().file.manipulate("del")})),a.dc()}}function Zt(t,e){if(1&t){const t=a.fc();a.ec(0,"nb-action",31),a.mc("click",(function(){return a.Kc(t),a.oc().paste()})),a.dc()}}function Kt(t,e){if(1&t){const t=a.fc();a.ec(0,"nb-action",32),a.mc("click",(function(){return a.Kc(t),a.oc().mkdirDialog()})),a.dc()}}function Rt(t,e){if(1&t&&a.Zb(0,"nb-badge",33),2&t){const t=a.oc();a.wc("text",t.clipboardSize)}}const zt=function(t){return{subcolumn:!0,"subcolumn-right-bar":t}},Lt=function(t,e){return{mobile:t,pc:e}},Qt=[{path:"",component:(()=>{class t{constructor(t,e,n,i,c,o,r,s){this.toastrService=t,this.clipboard=e,this.resp=n,this.modal=i,this.router=c,this.route=o,this.sidebarService=r,this.tasksQueueService=s,this.homeMode=!1,this.fileMode=!1,this.mainBar=!1,this.navTrigger=new g.a,this.mkdirTrigger=new g.a,this.clipboardSize=0,this.pasteTrigger=new g.a,this.orderCnt=0,this.pcDetailViewEnable=!1,this.pcDetailView=!1,this.visable=!1}loading(){this.fileMode?this.file.loading():this.homeMode&&this.home.loading()}refresh(){this.homeMode?this.home.refresh():this.fileMode&&this.file.refresh()}addrJump(t){this.loading(),this.navTrigger.next(t)}navDeploy(){const t=this;this.nav$=new class extends M.p{constructor(){super(...arguments),this.prerequest$=t.navTrigger.pipe(Object(v.a)((t,e)=>JSON.stringify(t)===JSON.stringify(e)),Object(w.a)(e=>{let n=e.remote;n&&""===n&&(n=void 0);let i=e.path;return i&&""===i&&(i=void 0),t.homeMode=!n,t.fileMode=!!n,[{remote:n,path:i},[]]}))}},this.nav$.deploy(),this.navTrigger.next({})}mkdirDialog(){this.modal.open(B,Object(f.m)({isBlocking:!1},m.b)).result.then(t=>{t&&""!==t&&this.mkdirTrigger.next(t)},()=>{})}mkdirDeploy(){const t=this;t.mkdirTrigger.pipe(Object(y.a)(t.nav$.getOutput())).subscribe(([e,n])=>{if(0!==n[1].length)return n;n[0].path&&(e=[n[0].path,e].join("/")),t.toastrService.default("Creating directory","Waiting..."),this.tasksQueueService.AddTaskMkdir([{remote:n[0].remote,path:e},[]]).then(t=>{0!==t[1].length?this.toastrService.danger("create dir failure"):this.toastrService.success("create dir success")})})}clipboardDeploy(){this.clipboard.clipboard$.getOutput().subscribe(t=>{0===t[1].length&&(this.clipboardSize=t[0].clipboard.values.length)})}pasteDeploy(){this.pasteTrigger.pipe(Object(y.a)(this.nav$.getOutput())).subscribe(([t,e])=>{if(0!==e[1].length)throw Error("can't not get destination.");t.forEach(t=>{this.clipboard.post(e[0],t).then(e=>{0===e[1].length?this.toastrService.success(`"${t}" tasks sent to server`,"Success",{icon:Object(_.e)(t)}):this.toastrService.danger(`"${t}" tasks sent to server`,"Failure",{icon:Object(_.e)(t),destroyByClick:!0})})})})}paste(){this.pasteTrigger.next(["copy","move"])}clipboardDialog(){this.modal.open(U,Object(f.m)({isBlocking:!1},m.b)).result.then(t=>{!0===t&&this.pasteTrigger.next(["del"])},()=>{})}routeDeploy(){this.route.queryParams.pipe(Object(O.a)(()=>this.visable),Object(v.a)((t,e)=>JSON.stringify(t)===JSON.stringify(e))).subscribe(t=>{this.navTrigger.next(t)}),this.nav$.getOutput().pipe(Object(O.a)(()=>this.visable)).subscribe(t=>{if(0!==t[1].length)return;const e={};t[0].remote&&""!==t[0].remote&&(e.remote=t[0].remote),t[0].path&&""!==t[0].path&&(e.path=t[0].path),this.router.navigate([],{queryParams:e})})}sidebarDeploy(){this.resp.getResponsiveSize.subscribe(t=>{this.mainBar=!("xs"===t||"sm"===t||"md"===t),this.pcDetailViewEnable="xs"!==t,"xs"===t&&(this.pcDetailView=!1,this.sidebarService.collapse("detail"))})}toggleDetail(){this.pcDetailView=!this.pcDetailView,this.sidebarService.toggle(!1,"detail")}openRemoteDetail(t){this.pcDetailView&&this.remoteDetail.navNode(t),this.pcDetailViewEnable||this.modal.open(this.remoteDetailMobile,Object(f.m)({isBlocking:!1,navNode:t},m.b))}openFileDetail(t){this.pcDetailView&&this.fileDetail.itemNode(t),this.pcDetailViewEnable||this.modal.open(this.fileDetailMobile,Object(f.m)({isBlocking:!1,itemNode:t},m.b))}ngOnInit(){this.visable=!0,this.sidebarDeploy(),this.navDeploy(),this.routeDeploy(),this.mkdirDeploy(),this.clipboardDeploy(),this.pasteDeploy()}ngOnDestroy(){this.visable=!1}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(o.ib),a.Yb(E),a.Yb(h.c),a.Yb(m.a),a.Yb(b.c),a.Yb(b.a),a.Yb(o.Z),a.Yb(T))},t.\u0275cmp=a.Sb({type:t,selectors:[["app-manager"]],viewQuery:function(t,e){var n;1&t&&(a.Zc(ct,!0),a.Zc(ht,!0),a.Zc(gt,!0),a.Zc(jt,!0),a.Zc(W,!0),a.Zc(Pt,!0)),2&t&&(a.Fc(n=a.nc())&&(e.file=n.first),a.Fc(n=a.nc())&&(e.home=n.first),a.Fc(n=a.nc())&&(e.remoteDetail=n.first),a.Fc(n=a.nc())&&(e.remoteDetailMobile=n.first),a.Fc(n=a.nc())&&(e.fileDetail=n.first),a.Fc(n=a.nc())&&(e.fileDetailMobile=n.first))},decls:27,vars:18,consts:[["subheader",""],[3,"nav$","jump"],[1,"push-to-right","option",3,"click"],["icon","refresh"],[1,"option"],["icon","list"],["class","option",3,"click",4,"ngIf"],[3,"ngClass"],[3,"pcDetailView","jump","showDetail",4,"ngIf"],[3,"pcDetailViewEnable","nav$","jump","showDetail",4,"ngIf"],["fixed","","end","","class","right-bar","tag","detail","state","collapsed",4,"ngIf"],["MobileRemoteDetail",""],["MobileFileDetail",""],["icon","copy",3,"click",4,"ngIf"],["icon","move",3,"click",4,"ngIf"],["icon","trash-2",3,"click",4,"ngIf"],["icon","clipboard",3,"click",4,"ngIf"],["icon","folder-add",3,"click",4,"ngIf"],[1,"push-to-right",2,"padding-right","1.5rem","padding-left","0.5rem",3,"click"],["icon","inbox",2,"font-size","1.5rem"],["status","info","position","top end",3,"text",4,"ngIf"],[1,"option",3,"click"],["icon","info"],[3,"pcDetailView","jump","showDetail"],[3,"pcDetailViewEnable","nav$","jump","showDetail"],["fixed","","end","","tag","detail","state","collapsed",1,"right-bar"],[4,"ngIf"],[3,"initNode"],["icon","copy",3,"click"],["icon","move",3,"click"],["icon","trash-2",3,"click"],["icon","clipboard",3,"click"],["icon","folder-add",3,"click"],["status","info","position","top end",3,"text"]],template:function(t,e){1&t&&(a.ec(0,"nb-layout-header",0),a.ec(1,"app-manager-breadcrumb",1),a.mc("jump",(function(t){return e.addrJump(t)})),a.dc(),a.ec(2,"a",2),a.mc("click",(function(){return e.refresh()})),a.Zb(3,"nb-icon",3),a.dc(),a.ec(4,"a",4),a.Zb(5,"nb-icon",5),a.dc(),a.Sc(6,Dt,2,0,"a",6),a.dc(),a.ec(7,"div",7),a.ec(8,"nb-card"),a.ec(9,"nb-card-body"),a.Sc(10,$t,1,1,"app-manager-home-mode",8),a.Sc(11,Tt,1,2,"app-manager-file-mode",9),a.dc(),a.dc(),a.dc(),a.Sc(12,Vt,3,2,"nb-sidebar",10),a.Sc(13,qt,1,1,"ng-template",null,11,a.Tc),a.Sc(15,Ft,1,1,"ng-template",null,12,a.Tc),a.ec(17,"nb-layout-footer",7),a.ec(18,"nb-actions"),a.Sc(19,Nt,1,0,"nb-action",13),a.Sc(20,Ut,1,0,"nb-action",14),a.Sc(21,Bt,1,0,"nb-action",15),a.Sc(22,Zt,1,0,"nb-action",16),a.Sc(23,Kt,1,0,"nb-action",17),a.ec(24,"nb-action",18),a.mc("click",(function(){return e.clipboardDialog()})),a.Zb(25,"nb-icon",19),a.Sc(26,Rt,1,1,"nb-badge",20),a.dc(),a.dc(),a.dc()),2&t&&(a.Mb(1),a.wc("nav$",e.nav$),a.Mb(5),a.wc("ngIf",e.pcDetailViewEnable),a.Mb(1),a.wc("ngClass",a.Ac(13,zt,e.pcDetailView)),a.Mb(3),a.wc("ngIf",e.homeMode),a.Mb(1),a.wc("ngIf",e.fileMode),a.Mb(1),a.wc("ngIf",e.pcDetailViewEnable),a.Mb(5),a.wc("ngClass",a.Bc(15,Lt,!e.mainBar,e.mainBar)),a.Mb(2),a.wc("ngIf",e.fileMode),a.Mb(1),a.wc("ngIf",e.fileMode),a.Mb(1),a.wc("ngIf",e.fileMode),a.Mb(1),a.wc("ngIf",e.fileMode),a.Mb(1),a.wc("ngIf",e.fileMode),a.Mb(3),a.wc("ngIf",e.clipboardSize))},directives:[o.K,Ct,o.C,i.o,i.l,o.r,o.q,o.J,o.g,o.f,ht,ct,o.X,gt,W,o.l],styles:["nb-layout-header[_ngcontent-%COMP%] {\n\t\t\t\tposition: sticky;\n\t\t\t\ttop: 4.75rem;\n\t\t\t\tz-index: 700;\n\t\t\t}\n\t\t\tapp-manager-breadcrumb[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: contents;\n\t\t\t}\n\t\t\t.option[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0 0.3rem;\n\t\t\t}\n\t\t\t.right-bar[_ngcontent-%COMP%] {\n\t\t\t\ttop: calc(4.75rem * 2 + 0.05rem) !important;\n\t\t\t\tbottom: 65px !important;\n\t\t\t\theight: auto;\n\t\t\t\tz-index: 699;\n\t\t\t}\n\t\t\t[_nghost-%COMP%]   nb-sidebar[_ngcontent-%COMP%]     .main-container {\n\t\t\t\theight: auto !important;\n\t\t\t\ttop: calc(4.75rem * 2 + 0.05rem) !important;\n\t\t\t\tbottom: 65px !important;\n\t\t\t}\n\t\t\t[_nghost-%COMP%]   nb-sidebar[_ngcontent-%COMP%]     .scrollable {\n\t\t\t\tpadding: 1.25rem 0 !important;\n\t\t\t}\n\t\t\t.subcolumn[_ngcontent-%COMP%] {\n\t\t\t\tmargin-bottom: 4.75rem;\n\t\t\t\tmargin-top: 1.5rem;\n\t\t\t}\n\t\t\t.subcolumn-right-bar[_ngcontent-%COMP%] {\n\t\t\t\tmargin-right: 16rem;\n\t\t\t}\n\t\t\t\n\t\t\tnb-layout-footer[_ngcontent-%COMP%] {\n\t\t\t\tz-index: 998;\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 0;\n\t\t\t}\n\t\t\tnb-layout-footer.mobile[_ngcontent-%COMP%] {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\tnb-layout-footer.pc[_ngcontent-%COMP%] {\n\t\t\t\twidth: calc(100% - 16rem);\n\t\t\t}\n\t\t\tnb-layout-footer[_ngcontent-%COMP%]     nav {\n\t\t\t\toverflow-x: auto;\n\t\t\t}\n\t\t\tnb-actions[_ngcontent-%COMP%] {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t\t\n\t\t\t}\n\t\t\t.subcolumn[_ngcontent-%COMP%]    > nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: 0 1.25rem;\n\t\t\t}"]}),t})()}];let Yt=(()=>{class t{}return t.\u0275mod=a.Wb({type:t}),t.\u0275inj=a.Vb({factory:function(e){return new(e||t)},imports:[[b.g.forChild(Qt)],b.g]}),t})(),Ht=(()=>{class t{}return t.\u0275mod=a.Wb({type:t}),t.\u0275inj=a.Vb({factory:function(e){return new(e||t)},imports:[[i.c,Yt,o.h,o.v,o.E,o.U,s.d,o.L,o.Y,o.x,o.o,o.G,o.kb,o.m,o.fb,o.e,o.bb,o.O,r.b,d,p.a,c.b,h.b]]}),t})()},Iab2:function(t,e,n){var i,c;void 0===(c="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype?function(t,o,r){var s=c.URL||c.webkitURL,a=document.createElement("a");a.download=o=o||t.name||"download",a.rel="noopener","string"==typeof t?(a.href=t,a.origin===location.origin?i(a):n(a.href)?e(t,o,r):i(a,a.target="_blank")):(a.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(a.href)}),4e4),setTimeout((function(){i(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,c,o){if(c=c||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),c);else if(n(t))e(t,c,o);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){i(r)}))}}:function(t,n,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var r="application/octet-stream"===t.type,s=/constructor/i.test(c.HTMLElement)||c.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&s)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},l.readAsDataURL(t)}else{var u=c.URL||c.webkitURL,d=u.createObjectURL(t);o?o.location=d:location.href=d,o=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});c.saveAs=o.saveAs=o,t.exports=o})?i.apply(e,[]):i)||(t.exports=c)},Q5J2:function(t,e,n){"use strict";const i=n("WADQ");class c extends Error{constructor(t){super(t),this.name="TimeoutError"}}const o=(t,e,n)=>new Promise((o,r)=>{if("number"!=typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0)return void o(t);const s=setTimeout(()=>{if("function"==typeof n){try{o(n())}catch(s){r(s)}return}const i=n instanceof Error?n:new c("string"==typeof n?n:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),r(i)},e);i(t.then(o,r),()=>{clearTimeout(s)})});t.exports=o,t.exports.default=o,t.exports.TimeoutError=c},TDd8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n("tEK5");e.default=class{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(t,e){const n={priority:(e=Object.assign({priority:0},e)).priority,run:t};if(this.size&&this._queue[this.size-1].priority>=e.priority)return void this._queue.push(n);const c=i.default(this._queue,n,(t,e)=>e.priority-t.priority);this._queue.splice(c,0,n)}dequeue(){const t=this._queue.shift();return null==t?void 0:t.run}filter(t){return this._queue.filter(e=>e.priority===t.priority).map(t=>t.run)}get size(){return this._queue.length}}},WADQ:function(t,e,n){"use strict";t.exports=(t,e)=>(e=e||(()=>{}),t.then(t=>new Promise(t=>{t(e())}).then(()=>t),t=>new Promise(t=>{t(e())}).then(()=>{throw t})))},mH7l:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n("uhBA"),c=n("Q5J2"),o=n("TDd8"),r=()=>{},s=new c.TimeoutError;e.default=class extends i{constructor(t){var e,n,i,c;if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:o.default},t)).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==n?n:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(c=null===(i=t.interval)||void 0===i?void 0:i.toString())&&void 0!==c?c:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||0===t.interval,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=!0===t.throwOnTimeout,this._isPaused=!1===t.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const t=Date.now();if(void 0===this._intervalId){const e=this._intervalEnd-t;if(!(e<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},e)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),t&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,e={}){return new Promise((n,i)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===e.timeout?t():c.default(Promise.resolve(t()),void 0===e.timeout?this._timeout:e.timeout,()=>{(void 0===e.throwOnTimeout?this._throwOnTimeout:e.throwOnTimeout)&&i(s)});n(await o)}catch(o){i(o)}this._next()},e),this._tryToStartAnother()})}async addAll(t,e){return Promise.all(t.map(async t=>this.add(t,e)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(t=>{const e=this._resolveEmpty;this._resolveEmpty=()=>{e(),t()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(t=>{const e=this._resolveIdle;this._resolveIdle=()=>{e(),t()}})}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}}},mrSG:function(t,e,n){"use strict";function i(t,e,n,i){return new(n||(n=Promise))((function(c,o){function r(t){try{a(i.next(t))}catch(e){o(e)}}function s(t){try{a(i.throw(t))}catch(e){o(e)}}function a(t){var e;t.done?c(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}a((i=i.apply(t,e||[])).next())}))}n.d(e,"a",(function(){return i}))},tEK5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){let i=0,c=t.length;for(;c>0;){const o=c/2|0;let r=i+o;n(t[r],e)<=0?(i=++r,c-=o+1):c=o}return i}},uhBA:function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,c="~";function o(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new r(n,i||t,o),a=c?c+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(c=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(c?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=this._events[c?c+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,i=e.length,o=new Array(i);n<i;n++)o[n]=e[n].fn;return o},l.prototype.listenerCount=function(t){var e=this._events[c?c+t:t];return e?e.fn?1:e.length:0},l.prototype.emit=function(t,e,n,i,o,r){var s=c?c+t:t;if(!this._events[s])return!1;var a,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,i),!0;case 5:return u.fn.call(u.context,e,n,i,o),!0;case 6:return u.fn.call(u.context,e,n,i,o,r),!0}for(l=1,a=new Array(d-1);l<d;l++)a[l-1]=arguments[l];u.fn.apply(u.context,a)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,n);break;case 4:u[l].fn.call(u[l].context,e,n,i);break;default:if(!a)for(h=1,a=new Array(d-1);h<d;h++)a[h-1]=arguments[h];u[l].fn.apply(u[l].context,a)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,i){var o=c?c+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var r=this._events[o];if(r.fn)r.fn!==e||i&&!r.once||n&&r.context!==n||a(this,o);else{for(var s=0,l=[],u=r.length;s<u;s++)(r[s].fn!==e||i&&!r[s].once||n&&r[s].context!==n)&&l.push(r[s]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?this._events[e=c?c+t:t]&&a(this,e):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=c,l.EventEmitter=l,t.exports=l}}]);